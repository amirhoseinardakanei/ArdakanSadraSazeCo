{% extends 'Base/index.html' %}



{% block title %}همکاری با ما{% endblock %}


{% block body %}
    <section class="contact-section pb-100 pt-100">
            <div class="container">
                <div class="section-title text-center" style="margin-top: 30px">
                    <span>فرم همکاری با ما</span>
                    <h2>لطفاً فرم زیر را تکمیل کنید</h2>
                    <p> لطفا قبل از شروع تکمیل خود به یک اینترنت پایدار و مطمئن متصل شوید و مواظب باشید که صفحه رفرش نشود.</p>
                </div>

                <div class="row" style="margin-top: 100px">
                    <div class="col-lg-12">
                        <div class="contact-area">
                            <form id="multiStepForm">
                                <div class="step" id="step1">
                                    <!-- نام -->
                                    <div class="form-group">
                                        <label class="input-label">نام :</label>
                                        {{ form.first_name }}
                                        {{ form.first_name.errors }}
                                    </div>
                                    <script>
                                        const persianInput = document.getElementById('id_first_name');

                                        // جلوگیری از تایپ کاراکترهای غیرفارسی و اعداد
                                        persianInput.addEventListener('keypress', function(e) {
                                            const persianLetters = /[\u0600-\u06FF]/; // فقط حروف فارسی (بدون اعداد)
                                            const typedChar = String.fromCharCode(e.keyCode || e.which);

                                            if (!persianLetters.test(typedChar)) {
                                                e.preventDefault(); // جلوگیری از تایپ
                                                return false;
                                            }
                                        });

                                        // بررسی هنگام کپی-پیست یا درگ و دراپ
                                        persianInput.addEventListener('input', function() {
                                            // فقط حروف فارسی مجاز است (اعداد و فاصله هم غیرمجاز)
                                            this.value = this.value.replace(/[^\u0600-\u06FF]/g, '');
                                        });

                                        // جلوگیری از پیست متن غیرمجاز (اختیاری)
                                        persianInput.addEventListener('paste', function(e) {
                                            e.preventDefault();
                                            const pastedText = (e.clipboardData || window.clipboardData).getData('text');
                                            const filteredText = pastedText.replace(/[^\u0600-\u06FF]/g, '');
                                            this.value += filteredText;
                                        });
                                    </script>


                                    <!-- نام خانوادگی -->
                                    <div class="form-group">
                                        <label class="input-label">نام خانوادگی :</label>
                                        {{ form.last_name }}
                                        {{ form.last_name.errors }}
                                    </div>

                                    <!-- وضعیت تغیر نام یا نام خانوادگی -->
                                    <div class="form-group">
                                        <label class="input-label">آیا نام یا نام خانوادگی خود را تغیر داده اید ؟</label>
                                        <select class="form-control" onchange="fl_name()" id="name_change" name="name_change" required>
                                            {% if name_change == None %}
                                                <option value="0"></option>
                                                <option value="بله">بله</option>
                                                <option value="خیر">خیر</option>
                                            {% elif name_change == '0' %}
                                                <option value="0"></option>
                                                <option value="بله">بله</option>
                                                <option value="خیر">خیر</option>
                                            {% elif name_change != '0' %}
                                                <option value="{{ name_change }}">{{ name_change }}</option>
                                                <option value="0">آیا نام یا نام خانوادگی خود را تغیر داده اید؟</option>
                                                <option value="بله">بله</option>
                                                <option value="خیر">خیر</option>
                                            {% endif %}

                                        </select>
                                        {% if name_change == '0' %}
                                            <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                        {% endif %}
                                    </div>
                                    <script>

                                       function fl_name() {
                                            const militaryFields1 = document.getElementById('fulname');
                                            const militaryStatus1 = document.getElementById('name_change').value;
                                            militaryFields1.style.display = (militaryStatus1 === 'بله') ? 'block' : 'none';
                                       }
                                    </script>
                                    {% if name_change == 'بله' %}
                                        {% if status_step %}
                                            <div class="form-group" style="" id="fulname">
                                                <label class="input-label">نام و نام خانوادگی قبلی</label>
                                                <div class="form-group" style="" id="fulname">
                                                    <input type="text" class="form-control" placeholder="نام و نام خانوادگی قبلی" name="name_previous" value="{{ previous_name }}">
                                                </div>
                                            </div>
                                        {% else %}
                                            <div class="form-group" style="" id="fulname">
                                                {% if name_previous != '0' %}
                                                    <label class="input-label">نام و نام خانوادگی قبلی</label>
                                                    <input type="text" class="form-control" placeholder="نام و نام خانوادگی قبلی" name="name_previous" value="{{ name_previous }}">
                                                {% else %}
                                                    <label class="input-label">نام و نام خانوادگی قبلی</label>
                                                    <input type="text" class="form-control" placeholder="نام و نام خانوادگی قبلی" name="name_previous">
                                                {% endif %}
                                                {% if name_previous == '0' %}
                                                    <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                                {% endif %}
                                            </div>
                                        {% endif %}
                                    {% else %}
                                        <div class="form-group" style="display: none" id="fulname">
                                            {% if name_previous != '0' %}
                                                <label class="input-label">نام و نام خانوادگی قبلی</label>
                                                <input type="text" class="form-control" placeholder="نام و نام خانوادگی قبلی" name="name_previous" value="{{ name_previous }}">
                                            {% else %}
                                                <label class="input-label">نام و نام خانوادگی قبلی</label>
                                                <input type="text" class="form-control" placeholder="نام و نام خانوادگی قبلی" name="name_previous">
                                            {% endif %}
                                            {% if name_previous == '0' %}
                                                <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                            {% endif %}
                                        </div>

                                    {% endif %}


                                    <!-- جنسیت -->
                                    <div class="form-group">
                                        <label class="input-label">جنسیت</label>
                                        <select class="form-control"  name="gender" required>
                                            {% if status_step == True %}
                                                <option value="{{ gender_intial }}">{{ gender_intial }}</option>
                                                <option value="0">جنسیت</option>
                                                <option value="مرد">مرد</option>
                                                <option value="زن">زن</option>
                                            {% elif gender == None %}
                                                <option value="0">جنسیت</option>
                                                <option value="مرد">مرد</option>
                                                <option value="زن">زن</option>
                                            {% elif gender == '0' %}
                                                <option value="0">جنسیت</option>
                                                <option value="مرد">مرد</option>
                                                <option value="زن">زن</option>
                                            {% elif gender != '0' %}
                                                <option value="{{ gender }}">{{ gender }}</option>
                                                <option value="0">جنسیت</option>
                                                <option value="مرد">مرد</option>
                                                <option value="زن">زن</option>
                                            {% endif %}

                                        </select>
                                        {% if gender == '0' %}
                                            <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                        {% endif %}
                                    </div>

                                    <!-- عکس پرسنلی -->
                                    <div class="form-group">
                                        <label class="input-label">عکس پرسنلی</label>
                                        <label class="file-upload" id="upload-box">
                                            <div class="selected-file" id="file-name">عکس پرسنلی 📂</div>
                                            <input id="photo" type="file" name="img3/4" onchange="showFileName()" value="0">

                                        </label>
                                        {% if check_img == '0' %}
                                            <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                        {% endif %}


                                    </div>
                                    <script>
                                        function showFileName() {
                                            const input = document.getElementById('photo');
                                            const fileName = document.getElementById('file-name');
                                            const uploadBox = document.getElementById('upload-box');


                                            if (input.files.length > 0) {
                                                fileName.textContent = "✅ فایل انتخاب شد.";
                                                fileName.style.opacity = "1";
                                                uploadBox.classList.add("uploaded");

                                            } else {
                                                fileName.textContent = "عکس پرسنلی 📂";
                                                fileName.style.opacity = "1";
                                                uploadBox.classList.remove("uploaded");

                                            }

                                        }
                                    </script>


                                    <!-- تاریخ تولد -->
                                    <div class="form-group">
                                        <label class="input-label">تاریخ تولد</label>
                                        {{ form.birth_date }}
                                        {{ form.birth_date.errors }}
                                    </div>

                                    <!-- نام پدر -->
                                    <div class="form-group">
                                        <label class="input-label">نام پدر</label>
                                        {{ form.father_name }}
                                        {{ form.father_name.errors }}
                                    </div>

                                    <!-- شماره شناسنامه -->
                                    <div class="form-group">
                                        <label class="input-label">شماره شناسنامه</label>
                                        {{ form.birth_number }}
                                        {{ form.birth_number.errors }}
                                    </div>
                                    <script>
                                        document.getElementById("id_birth_number").addEventListener("input", function() {
                                            this.value = this.value.replace(/\D/g, ''); // فقط عدد بماند
                                        });
                                    </script>

                                    <!-- شماره ملی -->
                                    <div class="form-group">
                                        <label class="input-label">شماره ملی</label>
                                        {{ form.national_number }}
                                        {{ form.national_number.errors }}
                                    </div>
                                    <script>
                                        document.getElementById("id_national_number").addEventListener("input", function() {
                                            this.value = this.value.replace(/\D/g, ''); // فقط عدد بماند
                                        });
                                    </script>

                                    <!-- تصویر کارت ملی -->
                                    <div class="form-group">
                                            <label class="input-label">تصویر کارت ملی</label>
                                            <label class="file-upload" id="upload-box1">

                                                <div class="selected-file" id="file-name1">تصویر کارت ملی 📂</div>
                                                <input id="photo1" type="file" name="img-card-national" onchange="showFileName1()">
                                            </label>
                                            {% if img_card_national == '0' %}
                                                <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                            {% endif %}


                                        </div>
                                    <script>
                                            function showFileName1() {
                                                const input1 = document.getElementById('photo1');
                                                const fileName1 = document.getElementById('file-name1');
                                                const uploadBox1 = document.getElementById('upload-box1');

                                                if (input1.files.length > 0) {
                                                    fileName1.textContent = "✅ فایل انتخاب شد.";
                                                    fileName1.style.opacity = "1";
                                                    uploadBox1.classList.add("uploaded");
                                                } else {
                                                    fileName1.textContent = "تصویر کارت ملی 📂";
                                                    fileName1.style.opacity = "1";
                                                    uploadBox1.classList.remove("uploaded");
                                                }
                                            }
                                        </script>

                                    <!-- تصویر پشت کارت ملی -->
                                    <div class="form-group">
                                        <label class="input-label">تصویر پشت کارت ملی</label>
                                        <label class="file-upload" id="upload-box12">

                                            <div class="selected-file" id="file-name12">تصویر پشت کارت ملی 📂</div>
                                            <input id="photo12" type="file" name="img-card-national2" onchange="showFileName12()">
                                        </label>
                                        {% if img_card_national2 == '0' %}
                                            <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                        {% endif %}


                                    </div>
                                    <script>
                                        function showFileName12() {
                                            const input12 = document.getElementById('photo12');
                                            const fileName12 = document.getElementById('file-name12');
                                            const uploadBox12 = document.getElementById('upload-box12');

                                            if (input12.files.length > 0) {
                                                fileName12.textContent = "✅ فایل انتخاب شد.";
                                                fileName12.style.opacity = "1";
                                                uploadBox12.classList.add("uploaded");
                                            } else {
                                                fileName12.textContent = "تصویر پشت کارت ملی 📂";
                                                fileName12.style.opacity = "1";
                                                uploadBox12.classList.remove("uploaded");
                                            }
                                        }
                                    </script>


                                     <!-- استان محل تولد -->
                                    <div class="form-group">
                                        <label class="input-label">استان محل تولد</label>
                                        <select class="form-control" id="province" name="province" required onchange="updateCities()">
                                            {% if status_step == True %}
                                                <option value="{{ birth_province }}">{{ birth_province }}</option>
                                            {% elif province == None %}
                                                <option value="0">استان</option>
                                            {% elif province == "0" %}
                                                <option value="0">استان</option>
                                            {% elif province != "0" %}
                                                <option value="{{ province }}">{{ province }}</option>
                                            {% endif %}



                                            <!-- استان‌ها به صورت داینامیک از کد زیر بارگذاری می‌شوند -->
                                        </select>
                                        {% if province == "0" %}
                                            <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                        {% endif %}

                                    </div>

                                    <!-- شهرستان محل تولد -->
                                    <div class="form-group">
                                        <label class="input-label">شهرستان محل تولد</label>
                                        <select class="form-control" id="city" name="city" required>
                                            {% if status_step == True %}
                                                <option value="{{ birth_city }}">{{ birth_city }}</option>
                                            {% elif city == None %}
                                                <option value="0">شهر</option>
                                            {% elif city == "0" %}
                                                <option value="0">شهر</option>
                                            {% elif city != "0" %}
                                                <option value="{{ city }}">{{ city }}</option>
                                            {% endif %}



                                            <!-- شهرها به صورت داینامیک بعد از انتخاب استان بارگذاری می‌شوند -->
                                        </select>

                                        {% if city == "0" %}
                                            <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                        {% endif %}
                                    </div>

                                    <!-- تاریخ صدور شناسنامه -->
                                    <div class="form-group">
                                        <label class="input-label">تاریخ صدور شناسنامه</label>
                                        {{ form.birth_cert_date }}
                                        {{ form.birth_cert_date.errors }}
                                    </div>

                                    <div class="container">
                                        <label class="input-label">تصویر شناسنامه</label>
                                        <div class="row d-flex justify-content-between">
                                            <label class="file-upload col-xl-2" id="upload-box21">

                                                <div class="selected-file" id="file-name21">تصویر شناسنامه 📂</div>
                                                <input id="photo21" type="file" name="img-card-certificate" onchange="showFileName21()">
                                            </label>


                                            <script>
                                                function showFileName21() {
                                                    const input21 = document.getElementById('photo21');
                                                    const fileName21 = document.getElementById('file-name21');
                                                    const uploadBox21 = document.getElementById('upload-box21');

                                                    if (input21.files.length > 0) {
                                                        fileName21.textContent = "✅ فایل انتخاب شد.";
                                                        fileName21.style.opacity = "1";
                                                        uploadBox21.classList.add("uploaded");
                                                    } else {
                                                        fileName21.textContent = "تصویر شناسنامه 📂";
                                                        fileName21.style.opacity = "1";
                                                        uploadBox21.classList.remove("uploaded");
                                                    }
                                                }
                                            </script>

                                            <label class="file-upload col-xl-2" id="upload-box22">

                                                <div class="selected-file" id="file-name22">صفحه ی دوم 📂</div>
                                                <input id="photo22" type="file" name="img-card-certificate2"  onchange="showFileName22()">
                                            </label>
                                            <script>
                                                function showFileName22() {
                                                    const input22 = document.getElementById('photo22');
                                                    const fileName22 = document.getElementById('file-name22');
                                                    const uploadBox22 = document.getElementById('upload-box22');

                                                    if (input22.files.length > 0) {
                                                        fileName22.textContent = "✅ فایل انتخاب شد.";
                                                        fileName22.style.opacity = "1";
                                                        uploadBox22.classList.add("uploaded");
                                                    } else {
                                                        fileName22.textContent = "صفحه ی دوم 📂";
                                                        fileName22.style.opacity = "1";
                                                        uploadBox22.classList.remove("uploaded");
                                                    }
                                                }
                                            </script>

                                            <label class="file-upload col-xl-2" id="upload-box23">

                                                <div class="selected-file" id="file-name23">صفحه ی سوم 📂</div>
                                                <input id="photo23" type="file" name="img-card-certificate3"  onchange="showFileName23()">
                                            </label>
                                            <script>
                                                function showFileName23() {
                                                    const input23 = document.getElementById('photo23');
                                                    const fileName23 = document.getElementById('file-name23');
                                                    const uploadBox23 = document.getElementById('upload-box23');

                                                    if (input23.files.length > 0) {
                                                        fileName23.textContent = "✅ فایل انتخاب شد.";
                                                        fileName23.style.opacity = "1";
                                                        uploadBox23.classList.add("uploaded");
                                                    } else {
                                                        fileName23.textContent = "صفحه ی سوم 📂";
                                                        fileName23.style.opacity = "1";
                                                        uploadBox23.classList.remove("uploaded");
                                                    }
                                                }
                                            </script>

                                            <label class="file-upload col-xl-2" id="upload-box24">

                                                <div class="selected-file" id="file-name24">صفحه ی چهارم 📂</div>
                                                <input id="photo24" type="file" name="img-card-certificate4"  onchange="showFileName24()">
                                            </label>
                                            <script>
                                                function showFileName24() {
                                                    const input24 = document.getElementById('photo24');
                                                    const fileName24 = document.getElementById('file-name24');
                                                    const uploadBox24 = document.getElementById('upload-box24');

                                                    if (input24.files.length > 0) {
                                                        fileName24.textContent = "✅ فایل انتخاب شد.";
                                                        fileName24.style.opacity = "1";
                                                        uploadBox24.classList.add("uploaded");
                                                    } else {
                                                        fileName24.textContent = "صفحه ی چهارم 📂";
                                                        fileName24.style.opacity = "1";
                                                        uploadBox24.classList.remove("uploaded");
                                                    }
                                                }
                                            </script>

                                            <label class="file-upload col-xl-2" id="upload-box25">
                                                <div class="selected-file" id="file-name25">صفحه ی پنجم 📂</div>
                                                <input id="photo25" type="file" name="img-card-certificate5"  onchange="showFileName25()">
                                            </label>
                                            <script>
                                                function showFileName25() {
                                                    const input25 = document.getElementById('photo25');
                                                    const fileName25 = document.getElementById('file-name25');
                                                    const uploadBox25 = document.getElementById('upload-box25');

                                                    if (input25.files.length > 0) {
                                                        fileName25.textContent = "✅ فایل انتخاب شد." + input25.files[0].name;
                                                        fileName25.style.opacity = "1";
                                                        uploadBox25.classList.add("uploaded");
                                                    } else {
                                                        fileName25.textContent = "صفحه ی پنجم 📂";
                                                        fileName25.style.opacity = "1";
                                                        uploadBox25.classList.remove("uploaded");
                                                    }
                                                }
                                            </script>
                                        </div>
                                    </div>
                                    {% if img_card_certificate == '0' %}
                                        <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                    {% endif %}

                                    <div class="col-sm-12" style="text-align: center; padding: 20px">
                                        <button type="submit" class="default-btn contact-btn">مرحله بعدی</button>
                                    </div>
                                </div>
                                <div class="step" id="step2">


                                    <div class="form-group" >
                                        <label class="input-label">وضعیت تاهل :</label>
                                        <select class="form-control" id="marital-status" name="marital_status"  onchange="storytaahol()">
                                            {% if marital_status == None %}
                                            	<option value="0">وضعیت تاهل</option>
                                                <option value="مجرد">مجرد</option>
                                                <option value="متاهل">متاهل</option>
                                            {% elif marital_status == '0' %}
                                            	<option value="0">وضعیت تاهل</option>
                                                <option value="مجرد">مجرد</option>
                                                <option value="متاهل">متاهل</option>
                                            {% elif marital_status != '0' %}
                                            	<option value="{{ marital_status }}">{{ marital_status }}</option>
                                                <option value="مجرد">مجرد</option>
                                                <option value="متاهل">متاهل</option>
                                                <option value="0">وضعیت تاهل</option>
                                            {% endif %}

                                        </select>
                                        {% if marital_status == '0' %}
                                        	<ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                        {% endif %}
                                    </div>
                                    <script>

                                       function storytaahol() {
                                            const militaryFields1 = document.getElementById('taaholl');
                                            const militaryStatus1 = document.getElementById('marital-status').value;
                                            militaryFields1.style.display = (militaryStatus1 === 'متاهل') ? 'block' : 'none';
                                        }

                                    </script>

                                    {% if marital_status == 'متاهل' %}
                                    	<div id="taaholl" style="">
                                            <div class="form-group">
                                                <label class="input-label">تعداد اولاد :</label>
                                                <select class="form-control" id="children-count" name="children_count">
                                                    {% if children_count == None%}
                                                        <option value="0">تعداد اولاد</option>
                                                        <option value="ندارد">ندارد</option>
                                                        <option value="یک">یک</option>
                                                        <option value="دو">دو</option>
                                                        <option value="سه">سه</option>
                                                        <option value="چهار">چهار</option>
                                                    {% elif children_count == '0' %}
                                                        <option value="0">تعداد اولاد</option>
                                                        <option value="ندارد">ندارد</option>
                                                        <option value="یک">یک</option>
                                                        <option value="دو">دو</option>
                                                        <option value="سه">سه</option>
                                                        <option value="چهار">چهار</option>
                                                    {% elif children_count != '0' %}
                                                        <option value="{{ children_count }}">{{ children_count }}</option>
                                                        <option value="ندارد">ندارد</option>
                                                        <option value="یک">یک</option>
                                                        <option value="دو">دو</option>
                                                        <option value="سه">سه</option>
                                                        <option value="چهار">چهار</option>
                                                        <option value="0">تعداد اولاد</option>
                                                    {% endif %}

                                                </select>
                                                {% if children_count == '0' %}
                                                    <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                                {% endif %}
                                            </div>
                                            <div class="form-group">
                                                <label class="input-label">تاریخ تاهل :</label>
                                                <input class="form-control" id="birth-cert-date" data-jdp type="text" placeholder="تاریخ تاهل" name="birth_cert_date" autocomplete="off" onclick="this.removeAttribute('readonly')" onkeydown="return false" value="{{ birth_cert_date }}">
                                                {% if birth_cert_date == '' %}
                                                    <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                                {% endif %}
                                            </div>
                                        </div>
                                    {% else %}
                                        <div id="taaholl" style="display: none">
                                            <div class="form-group">
                                                <label class="input-label">تعداد اولاد :</label>
                                                <select class="form-control" id="children-count" name="children_count">
                                                    {% if children_count == None%}
                                                        <option value="0">تعداد اولاد</option>
                                                        <option value="ندارد">ندارد</option>
                                                        <option value="یک">یک</option>
                                                        <option value="دو">دو</option>
                                                        <option value="سه">سه</option>
                                                        <option value="چهار">چهار</option>
                                                    {% elif children_count == '0' %}
                                                        <option value="0">تعداد اولاد</option>
                                                        <option value="ندارد">ندارد</option>
                                                        <option value="یک">یک</option>
                                                        <option value="دو">دو</option>
                                                        <option value="سه">سه</option>
                                                        <option value="چهار">چهار</option>
                                                    {% elif children_count != '0' %}
                                                        <option value="{{ children_count }}">{{ children_count }}</option>
                                                        <option value="ندارد">ندارد</option>
                                                        <option value="یک">یک</option>
                                                        <option value="دو">دو</option>
                                                        <option value="سه">سه</option>
                                                        <option value="چهار">چهار</option>
                                                        <option value="0">تعداد اولاد</option>
                                                    {% endif %}

                                                </select>
                                                {% if children_count == '0' %}
                                                    <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                                {% endif %}
                                            </div>
                                            <div class="form-group">
                                                <label class="input-label">تاریخ تاهل :</label>
                                                <input class="form-control" id="birth-cert-date" data-jdp type="text" placeholder="تاریخ تاهل" name="birth_cert_date" autocomplete="off" onclick="this.removeAttribute('readonly')" onkeydown="return false">
                                                {% if birth_cert_date == '' %}
                                                    <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                                {% endif %}
                                            </div>
                                        </div>
                                    {% endif %}

                                    <!-- تعداد اولاد -->


                                    <!-- نظام وظیفه -->
                                    <div class="form-group">
                                        <label class="input-label">وضعیت نظام وظیفه :</label>
                                        <select class="form-control" id="military-status" name="military_status"  onchange="toggleMilitaryFields()">
                                            {% if military_status == None %}
                                            	<option value="0">وضعیت نظام وظیفه</option>
                                                <option value="معافیت">معافیت</option>
                                                <option value="پایان خدمت">پایان خدمت</option>
                                            {% elif military_status == '0' %}
                                                <option value="0">وضعیت نظام وظیفه</option>
                                                <option value="معافیت">معافیت</option>
                                                <option value="پایان خدمت">پایان خدمت</option>
                                            {% elif military_status != '0' %}
                                                <option value="{{ military_status }}">{{ military_status }}</option>
                                                <option value="معافیت">معافیت</option>
                                                <option value="پایان خدمت">پایان خدمت</option>
                                            {% endif %}


                                        </select>
                                        {% if military_status == '0' %}
                                        	<ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                        {% endif %}
                                    </div>

                                    {% if military_status == 'معافیت' %}
                                    	<div id="military-exemption-type" style="">
                                            <div class="form-group">
                                                {% if exemption_type != '0' %}
                                                    <label class="input-label">نوع معافیت :</label>
                                                	<input class="form-control" id="exemption-type" type="text" placeholder="نوع معافیت" name="exemption_type" value="{{ exemption_type }}">
                                                {% else %}
                                                    <label class="input-label">نوع معافیت :</label>
                                                    <input class="form-control" id="exemption-type" type="text" placeholder="نوع معافیت" name="exemption_type">
                                                {% endif %}

                                                {% if exemption_type == '' %}
                                                    <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                                {% endif %}
                                            </div>
                                        </div>
                                    {% else %}
                                        <div id="military-exemption-type" style="display: none">
                                            <div class="form-group">
                                                <label class="input-label">نوع معافیت :</label>
                                                <input class="form-control" id="exemption-type" type="text" placeholder="نوع معافیت" name="exemption_type">
                                                {% if exemption_type == '0' %}
                                                    <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                                {% endif %}
                                            </div>
                                        </div>
                                    {% endif %}
                                    <!-- نوع معافیت یا عکس پایان خدمت -->


                                    {% if military_status == 'پایان خدمت' %}
                                    	<div class="form-group" id="military-service-photo" style="">
                                            <label class="input-label">تصویر کارت پایان خدمت :</label>
                                            <label class="file-upload" id="upload-box3">
                                                <div class="selected-file" id="file-name3">تصویر کارت پایان خدمت 📂</div>
                                                <input id="photo3" type="file" name="img_card_military" onchange="showFileName2()">
                                                <script>
                                                    function showFileName2() {
                                                        const input3 = document.getElementById('photo3');
                                                        const fileName3 = document.getElementById('file-name3');
                                                        const uploadBox3 = document.getElementById('upload-box3');

                                                        if (input3.files.length > 0) {
                                                            fileName3.textContent = " ✅ فایل انتخاب شد. ";
                                                            fileName3.style.opacity = "1";
                                                            uploadBox3.classList.add("uploaded");
                                                        } else {
                                                            fileName3.textContent = "تصویر کارت پایان خدمت 📂";
                                                            fileName3.style.opacity = "1";
                                                            uploadBox3.classList.remove("uploaded");
                                                        }
                                                    }
                                                </script>
                                            </label>
                                            {% if img_card_military == '0' %}
                                                <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                            {% endif %}

                                            <div class="form-group">
                                                <label class="input-label">تاریخ شروع خدمت :</label>
                                                <input class="form-control" value="{{ start_military_date }}" id="birth-cert-date" data-jdp type="text" placeholder="تاریخ شروع خدمت" name="start_military_date" autocomplete="off" onclick="this.removeAttribute('readonly')" onkeydown="return false">
                                                {% if start_military_date == '0' %}
                                                    <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                                {% endif %}
                                            </div>

                                            <div class="form-group">
                                                <label class="input-label">تاریخ پایان خدمت :</label>
                                                <input class="form-control" value="{{ end_military_date }}" id="birth-cert-date" data-jdp type="text" placeholder="تاریخ پایان خدمت" name="end_military_date" autocomplete="off" onclick="this.removeAttribute('readonly')" onkeydown="return false">
                                                {% if end_military_date == '0' %}
                                                    <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                                {% endif %}
                                            </div>
                                        </div>
                                    {% else %}
                                        <div class="form-group" id="military-service-photo" style="display: none">
                                            <label class="input-label">تصویر کارت پایان خدمت :</label>
                                            <label class="file-upload" id="upload-box3">
                                                <div class="selected-file" id="file-name3">تصویر کارت پایان خدمت 📂</div>
                                                <input id="photo3" type="file" name="img_card_military" onchange="showFileName2()">
                                                <script>
                                            function showFileName2() {
                                                const input3 = document.getElementById('photo3');
                                                const fileName3 = document.getElementById('file-name3');
                                                const uploadBox3 = document.getElementById('upload-box3');

                                                if (input3.files.length > 0) {
                                                    fileName3.textContent = " ✅ فایل انتخاب شد. ";
                                                    fileName3.style.opacity = "1";
                                                    uploadBox3.classList.add("uploaded");
                                                } else {
                                                    fileName3.textContent = "تصویر کارت پایان خدمت 📂";
                                                    fileName3.style.opacity = "1";
                                                    uploadBox3.classList.remove("uploaded");
                                                }
                                            }
                                        </script>
                                            </label>
                                            {% if img_card_military == '0' %}
                                                <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                            {% endif %}

                                            <div class="form-group">
                                                <label class="input-label">تاریخ شروع خدمت :</label>
                                                <input class="form-control" id="birth-cert-date" data-jdp type="text" placeholder="تاریخ شروع خدمت" name="start_military_date" autocomplete="off" onclick="this.removeAttribute('readonly')" onkeydown="return false">
                                                {% if start_military_date == '0' %}
                                                    <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                                {% endif %}
                                            </div>

                                            <div class="form-group">
                                                <label class="input-label">تاریخ پایان خدمت :</label>
                                                <input class="form-control" id="birth-cert-date" data-jdp type="text" placeholder="تاریخ پایان خدمت" name="end_military_date" autocomplete="off" onclick="this.removeAttribute('readonly')" onkeydown="return false">
                                                {% if end_military_date == '0' %}
                                                    <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                                {% endif %}
                                            </div>

                                        </div>
                                    {% endif %}



                                    <!--  شهر سکونت -->
                                   <div class="form-group">
                                        <label class="input-label">استان سکونت :</label>
                                        <select class="form-control" id="province" name="province" required onchange="updateCities()">
                                            {% if province == None %}
                                                <option value="0">استان سکونت</option>
                                            {% elif province == "0" %}
                                                <option value="0">استان سکونت</option>
                                            {% elif province != "0" %}
                                                <option value="{{ province }}">{{ province }}</option>
                                            {% endif %}



                                            <!-- استان‌ها به صورت داینامیک از کد زیر بارگذاری می‌شوند -->
                                        </select>
                                        {% if province == "0" %}
                                            <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                        {% endif %}
                                   </div>


                                    <div class="form-group">
                                        <label class="input-label"> شهر سکونت :</label>
                                        <select class="form-control" id="city" name="city" required>
                                            {% if city == None %}
                                                <option value="0"> شهر سکونت</option>
                                            {% elif city == "0" %}
                                                <option value="0">شهر سکونت</option>
                                            {% elif city != "0" %}
                                                <option value="{{ city }}">{{ city }}</option>
                                            {% endif %}



                                            <!-- شهرها به صورت داینامیک بعد از انتخاب استان بارگذاری می‌شوند -->
                                        </select>

                                        {% if city == "0" %}
                                            <ul class="errorlist" id="error-message" style=""><li>این فیلد اجباری است.</li></ul>
                                        {% endif %}
                                    </div>


                                    <div class="form-group">
                                        <label class="input-label">آدرس محل سکونت :</label>
                                        {{ form.residence_address }}
                                        {{ form.residence_address.errors }}
                                    </div>
                                    <div class="form-group">
                                        <label class="input-label">آدرس دوم محل سکونت :</label>
                                        {{ form.residence_address_2 }}
                                        {{ form.residence_address_2.errors }}
                                    </div>
                                    <div class="form-group">
                                        <label class="input-label">آدرس محل کار :</label>
                                        {{ form.residence_work }}
                                        {{ form.residence_work.errors }}
                                    </div>


                                    <div class="form-group">
                                        <label class="input-label">کد پستی محل سکونت :</label>
                                        {{ form.residence_postcode }}
                                        {{ form.residence_postcode.errors }}
                                    </div>
                                    <script>
                                        document.getElementById("id_residence_postcode").addEventListener("input", function() {
                                            this.value = this.value.replace(/\D/g, ''); // فقط عدد بماند
                                        });
                                    </script>

                                    <div class="form-group">
                                        <label class="input-label">شماره تلفن :</label>
                                        {{ form.phone_number }}
                                        {{ form.phone_number.errors }}
                                    </div>
                                    <script>
                                        document.getElementById("id_phone_number").addEventListener("input", function() {
                                            this.value = this.value.replace(/\D/g, ''); // فقط عدد بماند
                                        });
                                    </script>

                                    <div class="form-group">
                                        <label class="input-label">شماره تلفن اظطراری :</label>
                                        {{ form.emergency_phone_number }}
                                        {{ form.emergency_phone_number.errors }}
                                    </div>
                                    <script>
                                        document.getElementById("id_emergency_phone_number").addEventListener("input", function() {
                                            this.value = this.value.replace(/\D/g, ''); // فقط عدد بماند
                                        });
                                    </script>

                                    <div class="form-group">
                                        <label class="input-label">شماره تلفن منزل :</label>
                                        {{ form.home_phone_number }}
                                        {{ form.home_phone_number.errors }}
                                    </div>
                                    <script>
                                        document.getElementById("id_home_phone_number").addEventListener("input", function() {
                                            this.value = this.value.replace(/\D/g, ''); // فقط عدد بماند
                                        });
                                    </script>

                                    <div class="form-group">
                                        <label class="input-label">ایمیل :</label>
                                        {{ form.email }}
                                        {{ form.email.errors }}
                                    </div>


                                    <div class="col-sm-12" style="text-align: center">
                                        <a class="default-btn contact-btn" href="{% url 'CooperateStep_1' %}">
                                            مرحله قبلی
                                        </a>
                                        <button type="submit" class="default-btn contact-btn">
                                            مرحله بعدی
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <script>

            document.querySelector('form').addEventListener('submit', function(event) {
            let isValid = true;

            // بررسی فیلدهای اجباری
            const requiredFields = document.querySelectorAll('input[required], select[required]');
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    isValid = false;
                    const errorMessage = field.parentElement.querySelector('.error-message');
                    if (errorMessage) {
                        errorMessage.style.display = "block";
                    }
                }
            });

            if (!isValid) {
                event.preventDefault(); // جلوگیری از ارسال فرم
            }
        });
        </script>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                // Jalali Datepicker
                var dp = jalaliDatepicker;
                dp.startWatch();
            });
        </script>
        <script>

                // لیست استان‌ها و شهرها
                const iranProvinces = {
                    "آذربایجان شرقی": ["تبریز", "مراغه", "مرند", "اهر", "میانه"],
                    "آذربایجان غربی": ["ارومیه", "خوی", "مهاباد", "بوکان", "سلماس"],
                    "اردبیل": ["اردبیل", "مشگین‌شهر", "خلخال", "پارس‌آباد", "نمین"],
                    "اصفهان": ["اصفهان", "کاشان", "خمینی‌شهر", "نجف‌آباد", "فلاورجان"],
                    "البرز": ["کرج", "فردیس", "نظرآباد", "هشتگرد", "طالقان"],
                    "ایلام": ["ایلام", "دهلران", "مهران", "آبدانان", "سرابله"],
                    "بوشهر": ["بوشهر", "گناوه", "دشتستان", "کنگان", "عسلویه"],
                    "تهران": ["تهران", "ری", "شمیرانات", "ورامین", "دماوند"],
                    "چهارمحال و بختیاری": ["شهرکرد", "بروجن", "فارسان", "لردگان", "کوهرنگ"],
                    "خراسان جنوبی": ["بیرجند", "طبس", "قائن", "فردوس", "نهبندان"],
                    "خراسان رضوی": ["مشهد", "نیشابور", "سبزوار", "تربت‌حیدریه", "قوچان"],
                    "خراسان شمالی": ["بجنورد", "شیروان", "اسفراین", "جاجرم", "فاروج"],
                    "خوزستان": ["اهواز", "آبادان", "دزفول", "خرمشهر", "ماهشهر"],
                    "زنجان": ["زنجان", "ابهر", "خرمدره", "ماه‌نشان", "طارم"],
                    "سمنان": ["سمنان", "شاهرود", "دامغان", "گرمسار", "مهدی‌شهر"],
                    "سیستان و بلوچستان": ["زاهدان", "چابهار", "ایرانشهر", "خاش", "سراوان"],
                    "فارس": ["شیراز", "مرودشت", "کازرون", "فسا", "لار"],
                    "قزوین": ["قزوین", "البرز", "تاکستان", "بوئین‌زهرا", "آبیک"],
                    "قم": ["قم"],
                    "کردستان": ["سنندج", "مریوان", "سقز", "بانه", "بیجار"],
                    "کرمان": ["کرمان", "رفسنجان", "سیرجان", "بم", "جیرفت"],
                    "کرمانشاه": ["کرمانشاه", "اسلام‌آباد غرب", "سرپل ذهاب", "سنقر", "کنگاور"],
                    "کهگیلویه و بویراحمد": ["یاسوج", "دوگنبدان", "دهدشت", "لیکک", "سی‌سخت"],
                    "گلستان": ["گرگان", "گنبد کاووس", "علی‌آباد", "آق‌قلا", "مینودشت"],
                    "گیلان": ["رشت", "لاهیجان", "انزلی", "لنگرود", "آستارا"],
                    "لرستان": ["خرم‌آباد", "بروجرد", "دورود", "کوهدشت", "الیگودرز"],
                    "مازندران": ["ساری", "بابل", "آمل", "قائم‌شهر", "تنکابن"],
                    "مرکزی": ["اراک", "ساوه", "خمین", "محلات", "شازند"],
                    "هرمزگان": ["بندرعباس", "قشم", "کیش", "بندر لنگه", "میناب"],
                    "همدان": ["همدان", "ملایر", "نهاوند", "تویسرکان", "کبودرآهنگ"],
                    "یزد": ["یزد", "میبد", "اردکان", "بافق", "ابرکوه"]
                };

                // افزودن استان‌ها به select
                const provinceSelect = document.getElementById("province");
                const citySelect = document.getElementById("city");

                for (let province in iranProvinces) {
                    let option = document.createElement("option");
                    option.value = province;
                    option.textContent = province;
                    provinceSelect.appendChild(option);
                }

                // به‌روزرسانی لیست شهرها بر اساس استان انتخاب‌شده
                function updateCities() {
                    let selectedProvince = provinceSelect.value;
                    citySelect.innerHTML = '<option value="0">شهر</option>'; // پاک کردن لیست قبلی

                    if (selectedProvince) {
                        iranProvinces[selectedProvince].forEach(city => {
                            let option = document.createElement("option");
                            option.value = city;
                            option.textContent = city;
                            citySelect.appendChild(option);
                        });
                    }
                }
            </script>
{% endblock %}